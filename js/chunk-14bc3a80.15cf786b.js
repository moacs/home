(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-14bc3a80"],{"0159":function(e,t,i){"use strict";i.r(t);i("6aa1"),i("399c");var s=i("8a6c"),a=i("dc92"),o={name:"DialogForm",components:{HsDialog:i("af63").a},props:{formData:{type:Object,default:()=>({name:"杭州",area:"1"})},formMap:{type:Array,default:()=>[{label:"输入框示例",key:"name",type:"input"},{label:"下拉选择",key:"area",type:"select",selectOptions:[{label:"滨江区",value:1},{label:"萧山区",value:2}]}]},formRule:{type:Object,default:()=>({name:[{required:!0,message:"必填项",trigger:"blur"}]})}},methods:{comfirmDialog(){this.$refs.form.validate(e=>{e&&this.$emit("comfirmForm")})},closeDialog(){this.$refs.form.resetFields(),this.$emit("cancelForm")},resetFormFields(){this.$refs.form.resetFields()}}},l=(i("8be4"),i("c304")),r=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("HsDialog",e._g(e._b({staticClass:"dialog-form",on:{comfirmDialog:e.comfirmDialog,closeDialog:e.closeDialog,close:e.closeDialog}},"HsDialog",e.$attrs,!1),e.$listeners),[t("el-form",{ref:"form",staticClass:"form-group",attrs:{model:e.formData,rules:e.formRule,"label-position":"top"}},e._l(e.formMap,(function(i,s){return t("el-form-item",{key:s,attrs:{label:i.label,prop:i.key}},["input"===i.type?t("el-input",{model:{value:e.formData[i.key],callback:function(t){e.$set(e.formData,i.key,t)},expression:"formData[item.key]"}}):e._e(),"select"===i.type?t("el-select",{attrs:{"popper-append-to-body":!1},model:{value:e.formData[i.key],callback:function(t){e.$set(e.formData,i.key,t)},expression:"formData[item.key]"}},e._l(i.selectOptions,(function(e,i){return t("el-option",{key:i,attrs:{label:e.label,value:e.value}})})),1):e._e(),"textarea"===i.type?t("el-input",{attrs:{type:"textarea"},model:{value:e.formData[i.key],callback:function(t){e.$set(e.formData,i.key,t)},expression:"formData[item.key]"}}):e._e()],1)})),1)],1)}),[],!1,null,"7550ec75",null).exports,n={name:"CustomWallpaperDrawer",components:{HsDrawer:i("f8b1").a},data:()=>({show:!1,activeName:"1",bg:"",sliderFilter:0,sliderLightness:0,pures:[{color:"#FFFFFF",background:"#9CA3AF"},{color:"#FFFFFF",background:"#F87171"},{color:"#FFFFFF",background:"#FBBF24"},{color:"#FFFFFF",background:"#34D399"},{color:"#FFFFFF",background:"#60A5FA"},{color:"#FFFFFF",background:"#A78BFA"}],wallpaperImages:[{headerFontColor:"#FFFFFF",background:i("a13d")},{headerFontColor:"#FFFFFF",background:i("6e73")},{headerFontColor:"#FFFFFF",background:i("aee4")},{headerFontColor:"#000000",background:i("63cd")},{headerFontColor:"#FFFFFF",background:i("0a8c")},{headerFontColor:"#000000",background:i("bd9f")}]}),computed:{...Object(s.d)(["user","themeConfig"]),displayPure(){let e=this.themeConfig.pure?this.themeConfig.pure:[];return[...this.pures.concat(e)]},displayWallpaperImages(){let e=this.themeConfig.wallpaper?this.themeConfig.wallpaper:[];return[...this.wallpaperImages.concat(e)]}},mounted(){this.bg=this.user.config.bg,this.sliderFilter=this.user.config.bgFilter,this.sliderLightness=this.user.config.bgLightness},methods:{...Object(s.c)(["commitAll"]),changeFilter(e){this.initCustomStyle({user:{config:{bgFilter:e}}})},changeShadow(e){this.initCustomStyle({user:{config:{bgLightness:e}}})},beforeUpload(e){return e.size<=2097152?this.TOOL.getBase64(e,e=>{this.initCustomStyle({user:{config:{bg:e}}})}):this.$tips("error","图片大小已超过 2MB",null,2e3),!1},changeBg(e,t){this.initCustomStyle({user:{config:{bg:"pick"==t?e:e.background}}})},initCustomStyle(e){this.commitAll(e),this.$store.dispatch("snapshoot"),this.$store.dispatch("initLocalUserInfo")}}},c=(i("8a91"),{name:"HomeRecord",components:{DialogForm:r,CustomWallpaperDrawer:Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("HsDrawer",e._g(e._b({},"HsDrawer",e.$attrs,!1),e.$listeners),[t("div",{staticClass:"custom-wallpaper-drawer"},[t("el-collapse",{staticClass:"collapse",attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-collapse-item",{attrs:{name:"1"}},[t("template",{slot:"title"},[t("div",{staticClass:"title"},[e._v("基础设置")])]),t("div",{staticClass:"collapse-content"},[t("section",{staticClass:"other"},[t("div",[e._v("纯色背景")]),t("ul",[e._l(e.displayPure,(function(i,s){return t("li",{key:s,style:{backgroundColor:i.background},on:{click:function(t){return e.changeBg(i)}}})})),t("li",[t("el-color-picker",{attrs:{size:"mini"},on:{change:function(t){return e.changeBg(t,"pick")}},model:{value:e.bg,callback:function(t){e.bg=t},expression:"bg"}})],1)],2)]),t("section",{staticClass:"other"},[t("div",[e._v("背景模糊度")]),t("el-slider",{staticClass:"w-px-380 pl-px-8",attrs:{"show-tooltip":!1,min:0,max:10,step:.5},on:{change:e.changeFilter},model:{value:e.sliderFilter,callback:function(t){e.sliderFilter=t},expression:"sliderFilter"}})],1),t("section",{staticClass:"other"},[t("div",[e._v("遮罩浓度")]),t("el-slider",{staticClass:"w-px-380 pl-px-8",attrs:{"show-tooltip":!1,min:0,max:1,step:.1},on:{change:e.changeShadow},model:{value:e.sliderLightness,callback:function(t){e.sliderLightness=t},expression:"sliderLightness"}})],1)])],2),t("el-collapse-item",{attrs:{name:"2"}},[t("template",{slot:"title"},[t("div",{staticClass:"title"},[e._v("图片背景")])]),t("div",{staticClass:"collapse-content"},[t("ul",{staticClass:"image"},e._l(e.displayWallpaperImages,(function(i,s){return t("li",{key:s,style:{backgroundImage:`url(${i.background})`},on:{click:function(t){return e.changeBg(i)}}},[t("div",{staticClass:"setting"},[e._v(" 立即设置 ")])])})),0)])],2),t("el-collapse-item",{attrs:{name:"3"}},[t("template",{slot:"title"},[t("div",{staticClass:"title"},[e._v("自定义上传")])]),t("div",{staticClass:"collapse-content flex justify-center items-center"},[t("el-upload",{staticClass:"upload py-px-10",attrs:{accept:".png,.jpg,.git","before-upload":e.beforeUpload,action:"",drag:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("拖拽上传 · "),t("em",[e._v("点击上传")])])])],1)],2)],1)],1)])}),[],!1,null,"047973aa",null).exports},data:()=>({isEditMode:!1,isDeleteMode:!1,showForm:!1,showCustom:!1,title:"",formData:{name:"",url:"",remark:""},formMap:[{key:"name",label:"站点名称",type:"input"},{key:"url",label:"站点链接",type:"input"},{key:"remark",label:"备注",type:"textarea"}],formRule:{name:[{validator:Object(a.a)(["isNoEmpty::必填项","isChinese::请输入汉字/英文/数字"]),trigger:"blur"}],url:[{validator:Object(a.a)(["isNoEmpty::必填项","isUrl::请输入正确的网址"]),trigger:"blur"}]}}),computed:{...Object(s.d)(["user","config"])},methods:{...Object(s.c)(["commitAll"]),openAddMode(){this.title="添加网站",this.isEditMode=!1,this.isDeleteMode=!1,this.showForm=!0},openEditMode(){this.isEditMode=!this.isEditMode},openDeleteMode(){this.isDeleteMode=!this.isDeleteMode},handleEdit(e,t){this.title="编辑网站",this.showForm=!0,this.$nextTick(()=>{this.formData=Object.assign(this.formData,e)})},openSimpleMode(){this.handleCommit({user:{config:{simpleMode:!this.user.config.simpleMode}}})},handleDelete(e){let t=[...this.user.records];t.map((i,s)=>{i.id==e.id&&t.splice(s,1)}),this.handleCommit({user:{records:t}})},save(){let e=[...this.user.records],t=Object.assign({id:"",name:"",url:"",remark:""},{...this.formData});if(this.isEditMode)for(let i=0;i<e.length;i++)e[i].id==t.id&&(e[i]=t);else t.id=this.TOOL.getUid(16,8),e.push(t);this.handleCommit({user:{records:e}}),this.cancel()},cancel(){this.$refs.dialogForm&&this.$refs.dialogForm.resetFormFields(),this.showForm=!1},handleCommit(e){0!==Object.keys(e).length&&(this.commitAll(e),this.$store.dispatch("snapshoot"))},handleCopy(){let{records:e,config:t}=this.$store.state.user,i={records:e,config:t};this.TOOL.copyTextToClip(JSON.stringify(i),"已复制到剪贴板，请立即粘贴保存！")},async handleRecovery(){try{let e;e=navigator.clipboard&&window.isSecureContext?await navigator.clipboard.readText():prompt("请粘贴之前拷贝保存的数据进行恢复");let t=JSON.parse(e),{records:i,config:s}=t;if(!Array.isArray(i))throw new Error;if("[object Object]"!==Object.prototype.toString.call(s))throw new Error;this.handleCommit({user:{records:i,config:s}}),this.$tips("success","数据恢复成功","top-right",2e3,()=>{window.location.reload()})}catch(e){this.$tips("error","恢复数据失败","top-right",2e3)}},openCustomWallpaper(){this.showCustom=!0}}}),d=(i("38b1"),Object(l.a)(c,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"rightMenu",rawName:"v-rightMenu"}],staticClass:"home-record"},[t("header",[e._m(0),t("ul",[t("li",{on:{click:e.openAddMode}},[t("i",{staticClass:"iconfont icon-tianjia"}),t("span",{staticClass:"sm:hidden"},[e._v("添加")])]),t("li",{class:{active:e.isEditMode},on:{click:e.openEditMode}},[t("i",{staticClass:"iconfont icon-md-settings"}),t("span",{staticClass:"sm:hidden"},[e._v("编辑")])]),t("li",{class:{active:e.isDeleteMode},on:{click:e.openDeleteMode}},[t("i",{staticClass:"iconfont icon-md-trash"}),t("span",{staticClass:"sm:hidden"},[e._v("管理")])]),t("li",{on:{click:e.handleCopy}},[t("i",{staticClass:"iconfont icon-md-cut"}),t("span",{staticClass:"sm:hidden"},[e._v("拷贝")])]),t("li",{on:{click:e.handleRecovery}},[t("i",{staticClass:"iconfont icon-md-sync"}),t("span",{staticClass:"sm:hidden"},[e._v("恢复")])]),t("li",{on:{click:e.openCustomWallpaper}},[t("i",{staticClass:"iconfont icon-md-happy"}),t("span",{staticClass:"sm:hidden"},[e._v("墙纸")])]),t("li",{on:{click:e.openSimpleMode}},[t("i",{staticClass:"iconfont icon-md-qr-scanner"}),t("span",{staticClass:"sm:hidden"},[e._v("全屏")])])])]),t("main",{directives:[{name:"rightMenu",rawName:"v-rightMenu"}]},[t("ul",{directives:[{name:"balance",rawName:"v-balance"}]},e._l(e.user.records,(function(i,s){return t("li",{key:`${i}-${s}`,staticClass:"record-item"},[e.isEditMode?t("a",{staticClass:"pointer text",class:{"edit-mode":e.isEditMode},on:{click:function(t){return e.handleEdit(i,s)}}},[e._v(" 点击编辑 ")]):t("a",{staticClass:"inherit-text text",attrs:{href:i.url,target:"_blank"}},[e._v(" "+e._s(i.name)+" ")]),e.isDeleteMode?t("i",{staticClass:"iconfont icon-md-close-circle delete-icon",on:{click:function(t){return e.handleDelete(i)}}}):e._e()])})),0)]),e.showForm?t("DialogForm",{ref:"dialogForm",attrs:{visible:e.showForm,width:"400",buttons:{comfirm:"确 认",cancel:"取 消"},title:e.title,formData:e.formData,formMap:e.formMap,formRule:e.formRule},on:{"update:visible":function(t){e.showForm=t},comfirmForm:e.save,cancelForm:e.cancel}}):e._e(),e.showCustom?t("CustomWallpaperDrawer",{attrs:{title:"个性墙纸",visible:e.showCustom,direction:"rtl",size:435},on:{"update:visible":function(t){e.showCustom=t}}}):e._e()],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"title"},[this._v(" 自定义网站 "),e("i",{staticClass:"iconfont icon-md-attach"})])}],!1,null,"029ebbfc",null));t.default=d.exports},"087c":function(e,t,i){},"0a8c":function(e,t,i){e.exports=i.p+"img/5.4eeaa603.jpeg"},"38b1":function(e,t,i){"use strict";i("bec1")},"63cd":function(e,t,i){e.exports=i.p+"img/4.ad66b67a.jpeg"},"6e73":function(e,t,i){e.exports=i.p+"img/2.977220e4.jpeg"},"8a91":function(e,t,i){"use strict";i("087c")},"8be4":function(e,t,i){"use strict";i("fe02")},a13d:function(e,t,i){e.exports=i.p+"img/1.4746c6ae.jpeg"},bd9f:function(e,t,i){e.exports=i.p+"img/6.f79ffc44.jpeg"},bec1:function(e,t,i){},fe02:function(e,t,i){}}]);